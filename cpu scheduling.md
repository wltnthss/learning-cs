## CPU 스케줄링 개요

운영체제는 CPU를 어떻게 프로세스에 배분하는지 알아봄을 위함.

CPU 스케줄링이란 운영체제가 프로세스들에게 합리적으로 CPU 자원을 배분하는 것을 말함.

### 프로세스 우선순위

운영체제가 프로세스들에게 합리적으로 CPU자원을 배분할 때는 프로세스의 우선순위에 맞게 배분해야함.

운영체제는 각 프로세스의 PCB(Process Block)에 우선순위를 명시하고, PCB에 적힌 우선순위를 기준으로 먼저 처리할 프로세스를 결정함.

하지만 운영체제가 모든 프로세스의 PCB를 찾아보는 것은 비효율적이기에 프로세스들에게 '줄을 서서 기다릴 것' 을 요구하는데 이것을 '스케줄링 큐' 라고 함.

### 스케줄링 큐 

스케줄링 큐는 프로세스들(CPU, 하드디스크, 입출력장치 등)을 큐에 삽입하여 줄을 세워 관리됨.

큐에는 대표적인 큐로 준비 큐와 대기 큐가 존재.

준비 큐는 CPU를 이용하고 싶은 프로세스, 대기 큐는 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄.

### 선점형과 비선점형 스케줄링

프로세스가 CPU를 사용하도록 허락하여, 사용중 여기서 다른 프로세스가 급하게 사용하길 요청한다면?

선점형 스케줄링이란 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식.

비선점형 스케줄링이란 하나의 프로세스가 자원을 사용중이라면 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까지 다른 프로세스가 끼어들 수 없는 스케줄링 방식.

여기까지가 CPU 스케줄링에 대한 배경지식이고, 실제 운영체제가 사용하는 스케줄링 알고리즘이 있음.

### 스케줄링 알고리즘

#### 1. 선입 선처리 스케줄링

FCFS 스케줄링(First Come First Served Scheduling) 이라고도 부름.

단순히 준비 큐에 삽입된 순서대로 프로세스를 처리하는 비선점형 스케줄링 방식.

장기 스케줄러인 batch에서 사용하곤함.

프로세스가 오래 기다린다는 단점이 존재.

수행 중인 긴 작업을 여러 개의 짧은 작업들이 기다리는 호위 효과 발생.

![image](https://github.com/wltnthss/learning-cs/assets/60785586/af258daf-4e95-4efb-b97f-ab85f62f56d6)

#### 2. 최단 작업 스케줄링

SJF 스케줄링(Shortest Job First Scheduling) 이라고도 부름.

CPU의 사용 시간이 긴 프로세스는 나중에, 사용 시간이 짧은 프로세스 먼저 실행하는 방식.

평균 대기 시간에 있어서는 최적의 알고리즘.

![image](https://github.com/wltnthss/learning-cs/assets/60785586/11f5a35f-db69-4406-94d5-a8610de67ff5)

#### 3. 라운드 로빈 스케줄링

RR 스케줄링(Round Robin Scheduling) 이라고도 부름.

타임 슬라이스만큼의 시간 동안 돌아가며 CPU를 이용하는 선점형 스케줄링 방식.

큐에 삽입된 프로세스는 정해진 시간만큼만 CPU를 이용함.

타임 슬라이스가 지나크게 크면 FCFS 스케줄링과 같고, 지나치게 작으면 문맥 교환에 발생하는 비용이 큼.

![image](https://github.com/wltnthss/learning-cs/assets/60785586/185ccc45-d7a5-4eba-ae4d-ce40c610e5d2)

#### 4. 최소 잔여 시간 우선 스케줄링

SRT(Shortest Remaining Time) 이라고도 부름.

SJF 와 RR 알고리즘을 합친 스케줄링 방식.

![image](https://github.com/wltnthss/learning-cs/assets/60785586/b13f3e27-9a3d-4dc7-b402-dd4adec6556b)

#### 5. 우선순위 스케줄링

프로세스들에 우선순위를 부여하고, 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 알고리즘.

우선순위가 높은 작업이 계속적으로 들어오는 경우, 우선순위가 낮은 작업은 준비상태에 머무르게됨. (기아현상)

이와 같은 문제를 해결하기위해 시스템에 머무는 시간이 증가할 수록 우선순위를 높여주는 에이징으로 해결.

![image](https://github.com/wltnthss/learning-cs/assets/60785586/5673c05c-f215-4885-a5a5-411a2a4a9429)
